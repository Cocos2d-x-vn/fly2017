{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "gameLogic",
    "require",
    "FlyingObject",
    "FIRE_GAP",
    "cc",
    "Class",
    "extends",
    "properties",
    "typeTag",
    "bullet",
    "default",
    "type",
    "Prefab",
    "bulletContainer",
    "Node",
    "_isFiring",
    "_lastFireTimePassed",
    "doOnLoad",
    "setSpeed",
    "setLiveLimit",
    "setPosition",
    "node",
    "x",
    "y",
    "setMoveRect",
    "systemEvent",
    "on",
    "SystemEvent",
    "EventType",
    "KEY_DOWN",
    "onKeyDown",
    "KEY_UP",
    "onKeyUp",
    "doUpdate",
    "dt",
    "isPlaying",
    "fire",
    "event",
    "keyCode",
    "KEY",
    "a",
    "left",
    "d",
    "right",
    "w",
    "up",
    "undefined",
    "s",
    "down",
    "getLife",
    "i",
    "bulletInst",
    "instantiate",
    "getComponent",
    "parent",
    "onCollisionEnter",
    "other",
    "self",
    "flyingObj",
    "otherTypeTag",
    "reduceLife",
    "doDestory"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var gameLogic = require('GameLogic');\nvar FlyingObject = require('FlyingObject');\n\n// 开火间隔（秒）\nvar FIRE_GAP = 0.3;\n\ncc.Class({\n    extends: FlyingObject,\n\n    properties: {\n        typeTag: 'PlayerPlane',\n\n        // 子弹预制件\n        bullet: {\n            default: null,\n            type: cc.Prefab\n        },\n\n        // 子弹容器Node\n        bulletContainer: {\n            default: null,\n            type: cc.Node\n        },\n\n        // 是否正在开火\n        _isFiring: true,\n        // 上次开火至今时间\n        _lastFireTimePassed: 0,\n    },\n\n    // use this for initialization\n    doOnLoad: function () {\n        this.setSpeed(0, 0);\n        this.setLiveLimit(0);\n        this.setPosition(this.node.x, this.node.y);\n        this.setMoveRect(-350, -647, 700, 1300);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    doUpdate: function (dt) {\n        if(!gameLogic.isPlaying()) return;\n\n        // 开火\n        if(this._isFiring && this._lastFireTimePassed >= FIRE_GAP){\n            this.fire();\n        }else{\n            this._lastFireTimePassed += dt;\n        }\n    },\n\n    onKeyDown: function(event){\n        switch(event.keyCode) {\n            case cc.KEY.a:\n            case cc.KEY.left:\n                this.setSpeed(-10);\n                break;\n            case cc.KEY.d:\n            case cc.KEY.right:\n                this.setSpeed(10);\n                break;\n            case cc.KEY.w:\n            case cc.KEY.up:\n                this.setSpeed(undefined, 10);\n                break;\n            case cc.KEY.s:\n            case cc.KEY.down:\n                this.setSpeed(undefined, -10);\n                break;\n        }\n    },\n\n    onKeyUp: function(event){\n        switch(event.keyCode) {\n            case cc.KEY.a:\n            case cc.KEY.left:\n            case cc.KEY.d:\n            case cc.KEY.right:\n                this.setSpeed(0);\n                break;\n            case cc.KEY.w:\n            case cc.KEY.up:\n            case cc.KEY.s:\n            case cc.KEY.down:\n                this.setSpeed(undefined, 0);\n                break;\n        }\n    },\n\n    // 开火\n    fire: function(){\n\n        // 一条命时，3发散射，其余单发\n        if(gameLogic.getLife() == 1){\n            for(var i=0; i<3; i++){\n                var bulletInst = cc.instantiate(this.bullet);\n                var bullet = bulletInst.getComponent('Bullet');\n                bulletInst.parent = this.bulletContainer;\n                bullet.setPosition(this.node.x + i * 10 - 10, this.node.y + 30);\n                bullet.setSpeed(i * 10 - 10, 15);\n                bullet.setLiveLimit(3);\n                this._lastFireTimePassed = 0;\n            }\n        }else{\n            var bulletInst = cc.instantiate(this.bullet);\n            var bullet = bulletInst.getComponent('Bullet');\n            bulletInst.parent = this.bulletContainer;\n            bullet.setPosition(this.node.x, this.node.y + 30);\n            bullet.setSpeed(0, 15);\n            bullet.setLiveLimit(3);\n            this._lastFireTimePassed = 0;\n        }\n    },\n    \n    /**\n     * 当碰撞产生的时候调用\n     * @param  {Collider} other 产生碰撞的另一个碰撞组件\n     * @param  {Collider} self  产生碰撞的自身的碰撞组件\n     */\n    onCollisionEnter: function (other, self) {\n        var flyingObj = other.getComponent('FlyingObject');\n        var otherTypeTag = flyingObj.typeTag;\n\n        if(otherTypeTag == 'Enermy'){\n            gameLogic.reduceLife(1);\n            flyingObj.doDestory();\n        }\n    }\n\n});\n"
  ]
}